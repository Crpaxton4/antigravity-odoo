# Production values for PostgreSQL
# Override default values.yaml settings

replicaCount: 3  # Multi-replica for HA

# Larger storage for production
persistence:
  size: 100Gi

# Higher resource limits
resources:
  requests:
    cpu: 1000m
    memory: 4Gi
  limits:
    cpu: 4000m
    memory: 8Gi

# Stricter anti-affinity for production
affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app
              operator: In
              values:
                - postgresql
        topologyKey: kubernetes.io/hostname

# Topology spread constraints for multi-zone resilience
# Ensures pods are evenly distributed across availability zones
topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: DoNotSchedule
    labelSelector:
      matchLabels:
        app: postgresql
